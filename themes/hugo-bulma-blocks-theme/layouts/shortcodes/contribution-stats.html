<!-- Stats Overview -->
{{ $type := .Get 0 | default "all" }}
{{ $link := .Get 1 | default "" }}

<div class="container">
    <div class="stats-grid">
        {{ if or (eq $type "all") (eq $type "orgs") }}
        <a href="{{ if $link }}{{ $link }}{{ end }}" class="stat-card">
            <div class="has-text-weight-semibold is-size-2">
                {{ $orgs := $.Site.Data.contributors.organizations }}
                {{ len $orgs }}
            </div>
            <div class="stat-label">Organizations</div>
        </a>
        {{ end }}

        {{ if or (eq $type "all") (eq $type "individuals") }}
        <a href="{{ if $link }}{{ $link }}{{ end }}" class="stat-card">
            <div class="has-text-weight-semibold is-size-2">
                {{ $allContributors := $.Site.Data.contributors.contributors.contributors }}
                {{ $githubContributors := 0 }}
                {{ range $allContributors }}
                    {{ if .has_github_account }}
                        {{ $githubContributors = add $githubContributors 1 }}
                    {{ end }}
                {{ end }}
                {{ $githubContributors }}
            </div>
            <div class="stat-label">Individual Contributors</div>
        </a>
        {{ end }}

        {{ if or (eq $type "all") (eq $type "commits") }}
        <div class="stat-card">
            <div class="has-text-weight-semibold is-size-2">
                {{ $allContributors := $.Site.Data.contributors.contributors.contributors }}
                {{ $totalCommits := 0 }}
                {{ range $allContributors }}
                    {{ if .has_github_account }}
                        {{ with .total_contributions }}
                            {{ $totalCommits = add $totalCommits . }}
                        {{ end }}
                    {{ end }}
                {{ end }}
                {{ lang.FormatNumber 0 $totalCommits }}
            </div>
            <div class="stat-label">Commits</div>
        </div>
        {{ end }}

        {{ if or (eq $type "all") (eq $type "supporting") }}
        <a href="{{ if $link }}{{ $link }}{{ end }}" class="stat-card">
            <div class="has-text-weight-semibold is-size-2">
                {{ $supportingContributors := $.Site.Data.contributors.supporting }}
                {{ len $supportingContributors }}
            </div>
            <div class="stat-label">Supporting Contributors</div>
        </a>
        {{ end }}
    </div>
</div>