
{{  $status := .Get "status"  }}

{{ if eq $status "active" }}

    <h2 class="subtitle">
        Flagship
    </h2>
    <div class="tile is-ancestor is-vertical funders">
        <div class="tile">
        {{ $.Scratch.Set "counter" 0 }}
        {{ $headlessbundle := .Site.GetPage "/funders" }}
        {{ range ( $headlessbundle.Resources.ByType "page" ) }}
        {{ if eq .Params.level "Flagship" }}
            {{ $startDate := time .Params.startDate }}
            {{ $endDate := time .Params.endDate }}
            {{ if ge $endDate now }}
                {{ $count := add ($.Scratch.Get "counter") 1 }}
                {{ $.Scratch.Set "counter" $count }}
                    {{ if eq ( mod $count 3 ) 1 }}
                        {{ if gt $count 1 }}
        </div>
        <div class="tile">
                        {{ end }}
                    {{ end }}
            <div class="tile is-parent"> 
                <article class="tile is-child box notification fund-flagship">
                    
                    <a href="{{ .Params.link }}">
                        <figure>
                            <img src="{{ .Site.BaseURL }}funders/{{ .Params.logo }}" alt="{{ .Params.title }}">
                        </figure>
                        <h3 class="title is-5">{{ .Params.title }}</h3>
                        <article class="subtitle is-7">{{ .Params.startDate }} - {{ .Params.endDate }}</article>
                    </a>
                </article>
            </div>
                {{ end }}
            {{ end }}
        {{ end }}
        </div>
    </div>

    <h2 class="subtitle">
        Large
    </h2>
    <div class="tile is-ancestor is-vertical funders">
        <div class="tile">
        {{ $.Scratch.Set "counter" 0 }}
        {{ $headlessbundle := .Site.GetPage "/funders" }}
        {{ range ( $headlessbundle.Resources.ByType "page" ) }}
        {{ if eq .Params.level "Large" }}
            {{ $startDate := time .Params.startDate }}
            {{ $endDate := time .Params.endDate }}
            {{ if ge $endDate now }}
                {{ $count := add ($.Scratch.Get "counter") 1 }}
                {{ $.Scratch.Set "counter" $count }}
                    {{ if eq ( mod $count 3 ) 1 }}
                        {{ if gt $count 1 }}
        </div>
        <div class="tile">
                        {{ end }}
                    {{ end }}
            <div class="tile is-parent"> 
                <article class="tile is-child box notification fund-large">
                    
                    <a href="{{ .Params.link }}">
                        <figure>
                            <img src="{{ .Site.BaseURL }}funders/{{ .Params.logo }}" alt="{{ .Params.title }}">
                        </figure>
                        <h3 class="title is-5">{{ .Params.title }}</h3>
                        <article class="subtitle is-7">{{ .Params.startDate }} - {{ .Params.endDate }}</article>
                    </a>
                </article>
            </div>
                {{ end }}
            {{ end }}
        {{ end }}
        </div>
    </div>
    <h2 class="subtitle">
        Medium
    </h2>

    <div class="tile is-ancestor is-vertical funders">
        <div class="tile">
        {{ $.Scratch.Set "counter" 0 }}
        {{ $headlessbundle := .Site.GetPage "/funders" }}
        {{ range ( $headlessbundle.Resources.ByType "page" ) }}
        {{ if eq .Params.level "Medium" }}
            {{ $startDate := time .Params.startDate }}
            {{ $endDate := time .Params.endDate }}
            {{ if ge $endDate now }}
                {{ $count := add ($.Scratch.Get "counter") 1 }}
                {{ $.Scratch.Set "counter" $count }}
                    {{ if eq ( mod $count 4 ) 1 }}
                        {{ if gt $count 1 }}
        </div>
        <div class="tile">
                        {{ end }}
                    {{ end }}
            <div class="tile is-parent"> 
                <article class="tile is-child box notification fund-medium">
                    <a href="{{ .Params.link }}">
                        <figure>
                            <img src="{{ .Site.BaseURL }}funders/{{ .Params.logo }}" alt="{{ .Params.title }}">
                        </figure>
                        <h3 class="title is-5">{{ .Params.title }}</h3>
                        <article class="subtitle is-7">{{ .Params.startDate }} - {{ .Params.endDate }}</article>
                        
                    </a>
                </article>
            </div>
                {{ end }}
            {{ end }}
        {{ end }}
        </div>
    </div>        
    <h2 class="subtitle">
        Small
    </h2>

    <div class="tile is-ancestor is-vertical funders">
        <div class="tile">
        {{ $.Scratch.Set "counter" 0 }}
        {{ $headlessbundle := .Site.GetPage "/funders" }}
        {{ range ( $headlessbundle.Resources.ByType "page" ) }}
        {{ if eq .Params.level "Small" }}
            {{ $startDate := time .Params.startDate }}
            {{ $endDate := time .Params.endDate }}
            {{ if ge $endDate now }}
                {{ $count := add ($.Scratch.Get "counter") 1 }}
                {{ $.Scratch.Set "counter" $count }}
                    {{ if eq ( mod $count 5 ) 1 }}
                        {{ if gt $count 1 }}
        </div>
        <div class="tile">
                        {{ end }}
                    {{ end }}
            <div class="tile is-parent"> 
                <article class="tile is-child box notification fund-small">
                    <a href="{{ .Params.link }}">
                        <figure >
                            <img src="{{ .Site.BaseURL }}funders/{{ .Params.logo }}" alt="{{ .Params.title }}">
                        </figure>
                        <h3 class="title is-5">{{ .Params.title }}</h3>
                        <article class="subtitle is-7">{{ .Params.startDate }} - {{ .Params.endDate }}</article>
                        
                    </a>
                </article>
            </div>
                {{ end }}
            {{ end }}
        {{ end }}
        </div>
    </div>

{{ end }}

{{ if eq $status "inactive" }}

<div class="tile is-ancestor is-vertical funders">
    <div class="tile">
    {{ $.Scratch.Set "counter" 0 }}
    {{ $headlessbundle := .Site.GetPage "/funders" }}
    {{ range ( $headlessbundle.Resources.ByType "page" ) }}
        {{ $startDate := time .Params.startDate }}
        {{ $endDate := time .Params.endDate }}
        {{ if le $endDate now }}
            {{ $count := add ($.Scratch.Get "counter") 1 }}
            {{ $.Scratch.Set "counter" $count }}
                {{ if eq ( mod $count 5 ) 1 }}
                    {{ if gt $count 1 }}
    </div>
    <div class="tile">
                    {{ end }}
                {{ end }}
        <div class="tile is-parent"> 
            <article class="tile is-child box notification fund-small past">
                <a href="{{ .Params.link }}">
                    <figure >
                        <img src="{{ .Site.BaseURL }}funders/{{ .Params.logo }}" alt="{{ .Params.title }}">
                    </figure>
                    <h3 class="title is-5">{{ .Params.title }}</h3>
                    <article class="subtitle is-7">{{ .Params.startDate }} - {{ .Params.endDate }}</article>
                    
                </a>
            </article>
        </div>
            {{ end }}
        {{ end }}
    </div>
</div>

{{ end }}