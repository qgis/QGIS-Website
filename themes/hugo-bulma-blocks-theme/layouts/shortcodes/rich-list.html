{{ $icon := .Get "icon" }}
{{ $image := .Get "image" }}
{{ $layoutClass := .Get "layoutClass" }}
{{ $iconClass := cond (ne $icon "") "has-icon" "" }}
{{ $imageClass := cond (ne $image "") "has-image" "" }}

{{ $url := .Get "listLink" }}
{{ $isExternal := or (strings.HasPrefix $url "http://") (strings.HasPrefix $url "https://") }}
{{ $rel := cond $isExternal "noopener noreferrer" "" }}
{{ $target := cond $isExternal "_blank" "" }}
{{ $externalClass := cond $isExternal "external-link" "" }}

{{ $listTitle := .Get "listTitle" }}
{{ $listSubtitle := .Get "listSubtitle" }}

{{ if $url }}
    <a
        class="rich-list {{ $layoutClass }} {{ $iconClass }} {{ $imageClass }} mr-2 mb-2"
        href="{{ $url }}"
        target="{{ $target }}"
        rel="{{ $rel }}"
        {{ .Get "linkAttr" }}
    >
        {{ with .Get "icon" }}
            <div class="icon">{{ . }}</div>
        {{ end }}
        {{ with .Get "image" }}
            <div class="image"><img src="{{ . }}"></div>
        {{ end }}
        <div class="listcont {{ $externalClass }}">{{ $listTitle }}</div>
        <div class="subtext is-size-7">{{ $listSubtitle }}</div>
    </a>
{{ else }}
    <div class="rich-list {{ $layoutClass }} {{ $iconClass }} {{ $imageClass }} mr-2 mb-2">
        {{ with .Get "icon" }}
            <div class="icon">{{ . }}</div>
        {{ end }}
        {{ with .Get "image" }}
            <div class="image"><img src="{{ . }}"></div>
        {{ end }}
        <div class="listcont">{{ $listTitle }}</div>
        <div class="subtext is-size-7">{{ $listSubtitle }}</div>
    </div>
{{ end }}